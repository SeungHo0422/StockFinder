<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>US Stocks Overview</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f8f9fa; }
        .table thead th { background: #f1f3f4; }
        .up { color: #198754; font-weight: bold; }
        .down { color: #dc3545; font-weight: bold; }
    </style>
</head>
<body>
<div class="container mt-4">
    <h2 class="mb-4">US Stocks Overview</h2>
    <form class="row g-3 mb-4" method="get" action="/stocks">
        {% for field in filter_fields %}
            {% if field.type == 'range' %}
                <div class="col-auto">
                    <input type="number" step="any" class="form-control" name="{{ field.name }}_min" placeholder="{{ field.min_placeholder }}" value="{{ request.query_params.get(field.name ~ '_min', '') }}">
                </div>
                <div class="col-auto">
                    <input type="number" step="any" class="form-control" name="{{ field.name }}_max" placeholder="{{ field.max_placeholder }}" value="{{ request.query_params.get(field.name ~ '_max', '') }}">
                </div>
            {% elif field.type == 'select' %}
                <div class="col-auto">
                    <select class="form-select" name="{{ field.name }}">
                        <option value="">{{ field.placeholder }}</option>
                        {% for opt in industry_options %}
                            <option value="{{ opt }}" {% if request.query_params.get(field.name) == opt %}selected{% endif %}>{{ opt }}</option>
                        {% endfor %}
                    </select>
                </div>
            {% endif %}
        {% endfor %}
        <div class="col-auto">
            <button type="submit" class="btn btn-primary">필터 적용</button>
        </div>
    </form>
    <div class="table-responsive">
        <table class="table table-bordered table-hover align-middle">
            <thead>
                <tr>
                    {% for col in columns %}
                        <th>{{ col.replace('_', ' ').title() }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for stock in stocks %}
                <tr>
                    {% for col in columns %}
                        {% set value = stock[col] %}
                        {% if col in ['change', 'change_', 'change_percent'] %}
                            {% if value is not none and value < 0 %}
                                <td class="down">{{ value }}</td>
                            {% elif value is not none and value > 0 %}
                                <td class="up">{{ value }}</td>
                            {% else %}
                                <td>{{ value }}</td>
                            {% endif %}
                        {% else %}
                            <td>{{ value }}</td>
                        {% endif %}
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
</body>
</html> 